/* ==UserStyle==
@name         BobbyWibowo-pixiv.net
@namespace    https://github.com/BobbyWibowo/userstyles
@version      1.0.40
@updateURL    https://github.com/BobbyWibowo/userstyles/raw/master/domains/pixiv.net.user.css
@license      MIT
==/UserStyle== */

@-moz-document domain("pixiv.net") {
  body,
  input,
  button,
  .cBLcLA {
    font-family: Ubuntu, sans-serif !important;
  }

  /* desktop only */

  /* premium banner */
  #__premium_banner,
  /* home's top promotion banner */
  .sc-7b5ed552-1,
  /* recommended users */
  .jrLxAu,
  /* ad popup after bookmarking */
  .cVFqOO,
  /* favorite guide tooltip */
  .work-interactions .tooltip-container,
  /* expanded view booth popup */
  .cONxpR,
  /* expanded view stats */
  .KmAnp,
  /* expanded view booth sidebar */
  .cmCMBu:nth-child(3),
  /* expanded view limited-time effects & link */
  div:has(> img[src*="/seasonal-effect-tag/"], > a > img[src*="/seasonal-effect-tag/"]),
  /* expanded view contest link */
  div:has(> a > img[src*="/contest_icon_"]),
  /* manga view like button */
  .dLCbDu,
  /* manga view bookmark button's stat */
  .dVjvjM span,
  /* manga view bookmark button's stat (bookmarked) */
  .bYzblb span,
  /* home multi view's recommended after bookmarking */
  [data-ga4-label="user_popular_works"],
  /* "sort by popularity" premium button */
  .jIlmtS,
  /* "premium free trial" links */
  a[href*="p=free_campaign"],
  /* premium campaign links */
  .icUpwV:has(a[href*="p=free_campaign"]),
  /* home sidebar section: ongoing contests */
  a[href*="/premium/campaign/"],
  /* TODO: contest? */
  .hSNbaL > .grid > :nth-child(2) .flex-col.gap-8:has(a[href*="/contest/"]),
  /* artist page's booth footer */
  .fwtRWn,
  /* bottom announcements on right sidebar (typically used for contests) */
  .pEWQe > .left-0 .sticky.bottom-0:last-child {
    display: none !important;
  }

  /* expanded view */
  main > section:has(figure > [role="presentation"]) {
    /* controls bar */
    div[style*="translateY"] section {
      /* always show floating controls bar */
      transform: translateY(0%) !important;

      /* like & share buttons */
      > :nth-child(2 of div),
      > :nth-child(4 of div) {
        display: none !important;
      }
    }

    /* recommended popup after bookmarking */
    figcaption > div:first-of-type[style*="opacity"] {
      display: none !important;

      & + div {
        margin-top: 32px !important;
      }
    }
  }

  /* hide bookmark stats in classic pages (e.g, bookmark_add.php) */
  ._unit.complete-unit .bookmark-count {
    font-size: 0 !important;
    position: relative;
    top: -4px;
  }

  ._unit.complete-unit .bookmark-count ._icon {
    vertical-align: -4px !important;
  }

  /* popular works */
  .bDfUjL {
    mask: none !important;
    flex-grow: 1 !important;

    .jJLjLO {
      width: 184px !important;
    }

    .dKPirx {
      border-radius: 8px !important;
    }

    .mbXtu {
      width: 184px !important;
      height: 184px !important;
    }

    div:has(> img:not([src^="data"]))::after {
      box-shadow: inset 0 0 0 3px var(--pixiv_utils_highlight_color) !important;
    }
  }

  .cUttoT,
  .ifWtzD {
    display: none !important;
  }

  /* mobile only */

  /* recommended users after following */
  #user-recommender,
  /* recommended users */
  .ddXsIb,
  /* expanded view like button */
  .work-interactions-like,
  /* expanded view share button */
  .gtm-work-interactions-share,
  /* expanded view stats */
  .work-stats > *:not(.times-wrap),
  /* recommended popup after bookmarking */
  .recommend-slidein-booster,
  /* recommended illustrations popup after bookmarking */
  .illust-recommender-spa,
  /* popular search trial */
  .popular-search-trial {
    display: none !important;
  }

  /* home page, remove right sidebar */
  .cgtmvA > .grid > .bg-background2 {
    display: none !important;
  }

  /* home page, expand recommended works section to full width */
  .cgtmvA > .grid > .bg-surface1 .w-\[var\(--street-work-content-width\)\] {
    width: 75%;
    min-width: var(--street-work-content-width);
  }

  .cgtmvA > .grid {
    grid-template-columns: 100% 0;
  }

  /* extra right margin for comment sticker button */
  .pWMGVnmagktZH1rG {
    margin-right: calc(2px + 20px);
  }

  /* highlight artist links */
  [href*="users/"]:not([href*="/illustrations"], [href*="/manga"], [href*="/bookmarks"], [href*="/request"], [href*="/following"]) {
    &:link {
      color: #1fa3fb !important;
    }

    &:visited {
      color: #ffadff !important;
    }
  }

  /* highlight visited artwork links */
  [href*="artworks/"]:not([href*="/bookmarks"]),
  [href*="novel/show.php"] {
    &:visited {
      color: #ffadff !important;
    }
  }
}
